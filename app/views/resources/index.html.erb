<% title 'Repositories', @product.name %>
<% activate_nav! :repositories %>

<div class="page-header sheet-header">
  <h2 class="page-header-title">Shared Resources</h2>
</div>

<div class="sheet-body">
  <div class="row">
    <div class="col-xs-8 col-md-8">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">
            <div class="dropdown pull-right">
              <%= react_component 'AddDomain', domains_url: product_domains_path(@product) %>
            </div>

            Domains
          </h3>
        </div>
        <div class="panel-body">
          Domains held in trust by Assembly on behalf of the community are guaranteed to remain available for the members of <%= @product.name %> for the life of the product.
        </div>

        <% if @product.domains.any? %>
          <table class="table">
            <% @product.domains.each do |domain| %>
              <tr>
                <td style="width:10px">
                  <% if domain.owned? %>
                    <span class="px1 glyphicon glyphicon-ok text-success"></span>
                  <% end %>
                </td>
                <td>
                  <%= domain.name %>
                </td>
                <td>
                  <% if domain.status %>
                    <span class="pull-right label label-danger mr1" data-toggle="tooltip" title="<%= domain.status %>">Error</span>
                  <% else %>
                    <span class="pull-right label label-info mr1"><%= domain.state %></span>
                  <% end %>
                </td>
              </tr>
            <% end %>
          </table>
        <% end %>
      </div>

<!--
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">
            <button class="btn btn-default btn-xs pull-right">Add repo</button>
            Repositories
          </h3>
        </div>
        <div class="panel-body">
          Repositories held in trust by Assembly on behalf of the community are guaranteed to remain available for the members of <%= @product.name %> for the life of the product.
        </div>

        <% if @product.repos.any? %>
          <table class="table">
            <% @product.repos.each do |repo| %>
              <tr>
                <td style="width:10px">
                  <span class="px1 glyphicon glyphicon-ok text-success"></span>
                </td>
                <td>
                  <i class="icon icon-github"></i>
                  <a href="https://github.com/asm-products/firesize" data-track="product.repo.clicked">
                    asm-products/firesize
                  </a>
                </td>
              </tr>
            <% end %>
          </table>
        <% end %>
      </div>

-->
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">
            <button class="btn btn-default btn-xs pull-right">Add integration</button>
            Integrations
          </h3>
        </div>
        <div class="panel-body">
          External services can be added to pull in rich data about <%= @product.name %>.
        </div>
        <table className="table">
          <tr>
            <td style="width:10px">
              <% # gah! %>
              <% if @product.integrations.include?(Integration.find_by(provider: 'google')) %>
                <span class="px1 glyphicon glyphicon-ok text-success"></span>
              <% end %>
            </td>
            <td>
              <a href="<%= product_integrations_path(@product, 'google') %>" id="google">
                <img height="20" src="https://developers.google.com/analytics/images/terms/google-analytics-logo.png" />
              </a>
            </td>
            <td class="text-muted">
              Post weekly updates on page views and site metrics
            </td>
          </tr>
        </table>
      </div>

    </div>
  </div>
</div>
