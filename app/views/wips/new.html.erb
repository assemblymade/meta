<% title 'New Task', @product.name %>

<%= render 'shared/navbar' %>
<%= render 'products/navbar' %>

<div class="page">
  <div class="container">
    <div class="page-header">
      <h2 class="page-header-title">Create a Task</h2>
    </div>

    <div class="row">
      <div class="col-xs-8">
        <%= form_for [@product, @wip] do |f| %>
          <div class="form-group">
            <%= f.label :title, 'class' => 'form-label' %>
            <%= f.text_field :title, 'value' => params[:title], 'class' => 'form-control', 'data-validate-length' => '2', 'autofocus' => 'autofocus' %>
          </div>

          <div class="form-group">
            <span class="help-block pull-right">(optional)</span>
            <%= f.label :description, 'Details', class: 'control-label' %>

            <div class="markdown-editor-control js-markdown-editor dropzone js-dropzone">
              <%= text_area_tag :description, '', class: 'form-control', rows: 4 %>
              <div class="dropzone-inner">
                To attach files drag &amp; drop here or <a href="#">select files
                from your computer</a>...
              </div>
            </div>
          </div>

          <fieldset>
            <div class="form-group">
              <%= f.label :deliverable, class: 'control-label' %>

              <div class="btn-group btn-group-justified" data-toggle="buttons">
                <% @wip.class.deliverable_types.each do |deliverable_type| %>
                  <%= f.label :deliverable, class: "btn btn-default #{'active' if @wip.deliverable == deliverable_type}", data: {show_tab: deliverable_type} do %>
                    <%= f.radio_button :deliverable, deliverable_type %>
                    <%= deliverable_type.camelcase %>
                  <% end %>
                <% end %>
              </div>
            </div>
          </fieldset>

          <div class="form-actions">
            <%= f.button 'Create task', 'class' => 'btn btn-primary', 'data-disable-with' => 'Saving...' %>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>

<%= render 'shared/footer' %>
